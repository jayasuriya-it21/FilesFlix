<!-- templates/client.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FileFlix - VLC Edition</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/client_style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/vlc-player.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/explorer.css') }}">
    <!-- LibVLC.js dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/@videolan/libvlc.js@3.0.16/dist/libvlc.min.js"></script>
</head>
<body>
    <header class="header">
        <div class="header-content">
            <a href="/client" class="logo">FileFlix</a>
            <div class="view-controls">
                <button id="gridViewBtn" class="view-btn active" title="Grid View">
                    <i class="fas fa-th-large"></i>
                </button>
                <button id="listViewBtn" class="view-btn" title="List View">
                    <i class="fas fa-list"></i>
                </button>
            </div>
            <div class="search-bar">
                <input type="text" class="search-input" placeholder="Search files..." id="searchInput">
                <button class="search-button">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="main-content">
        <!-- Breadcrumb navigation -->
        <div class="breadcrumb-container" id="breadcrumbContainer">
            <div class="breadcrumb-home">
                <button class="breadcrumb-item" data-path="">
                    <i class="fas fa-home"></i>
                </button>
            </div>
            <div id="breadcrumbPath"></div>
        </div>

        <!-- Filter section -->
        <section class="filter-section">
            <button class="filter-btn active" data-filter="all">All</button>
            <button class="filter-btn" data-filter="folder">Folders</button>
            <button class="filter-btn" data-filter="video">Videos</button>
            <button class="filter-btn" data-filter="image">Images</button>
            <button class="filter-btn" data-filter="audio">Audio</button>
            <button class="filter-btn" data-filter="document">Documents</button>
            <button class="filter-btn" data-filter="other">Other</button>
        </section>

        <!-- Loading spinner -->
        <div class="loading" id="loading">
            <div class="spinner"></div>
        </div>

        <!-- File explorer -->
        <section id="fileExplorer" class="file-explorer grid-view">
            <!-- Content will be dynamically generated -->
        </section>
    </main>

    <!-- Video Modal -->
    <div class="video-modal" id="videoModal">
        <div class="video-container">
            <button class="close-btn" onclick="closeVideo()">×</button>
            
            <!-- VLC Player Container -->
            <div id="vlc-player-container">
                <div id="vlc-player"></div>
                
                <!-- Custom VLC Controls -->
                <div class="vlc-controls">
                    <div class="vlc-controls-top">
                        <div class="title-area" id="video-title"></div>
                        <div class="settings-area">
                            <button class="vlc-button" id="audioTrackButton" title="Audio Tracks">
                                <i class="fas fa-volume-high"></i>
                            </button>
                            <button class="vlc-button" id="subtitleButton" title="Subtitles">
                                <i class="fas fa-closed-captioning"></i>
                            </button>
                            <button class="vlc-button" id="playbackSpeedButton" title="Playback Speed">
                                <i class="fas fa-gauge-high"></i>
                            </button>
                            <button class="vlc-button" id="aspectRatioButton" title="Aspect Ratio">
                                <i class="fas fa-tv"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="vlc-controls-center">
                        <button class="vlc-button large" id="seekBackward" title="Seek Backward">
                            <i class="fas fa-backward"></i>
                            <span>-10s</span>
                        </button>
                        <button class="vlc-button large" id="playPauseButton" title="Play/Pause">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="vlc-button large" id="seekForward" title="Seek Forward">
                            <i class="fas fa-forward"></i>
                            <span>+10s</span>
                        </button>
                    </div>
                    
                    <div class="vlc-controls-bottom">
                        <span class="time-display" id="current-time">00:00</span>
                        <div class="progress-container">
                            <div class="progress-bar">
                                <div class="progress-fill" id="progress-fill"></div>
                                <div class="progress-thumb" id="progress-thumb"></div>
                            </div>
                            <div class="thumbnail-preview" id="thumbnail-preview">
                                <img id="preview-img" src="" alt="Preview">
                                <div class="time-tooltip" id="preview-time"></div>
                            </div>
                        </div>
                        <span class="time-display" id="total-time">00:00</span>
                        <button class="vlc-button" id="volumeButton" title="Volume">
                            <i class="fas fa-volume-high"></i>
                        </button>
                        <div class="volume-slider-container">
                            <input type="range" class="volume-slider" id="volume-slider" min="0" max="100" value="100">
                        </div>
                        <button class="vlc-button" id="deinterlaceButton" title="Deinterlace">
                            <i class="fas fa-film"></i>
                        </button>
                        <button class="vlc-button" id="fullscreenButton" title="Fullscreen">
                            <i class="fas fa-expand"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Overlay Menus -->
                <div class="vlc-menu" id="audioTrackMenu">
                    <div class="menu-header">
                        <span>Audio Tracks</span>
                        <button class="vlc-button" onclick="toggleMenu('audioTrackMenu')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="menu-content" id="audioTrackOptions"></div>
                </div>
                
                <div class="vlc-menu" id="subtitleMenu">
                    <div class="menu-header">
                        <span>Subtitles</span>
                        <button class="vlc-button" onclick="toggleMenu('subtitleMenu')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="menu-content" id="subtitleOptions"></div>
                </div>
                
                <div class="vlc-menu" id="playbackSpeedMenu">
                    <div class="menu-header">
                        <span>Playback Speed</span>
                        <button class="vlc-button" onclick="toggleMenu('playbackSpeedMenu')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="menu-content" id="speedOptions">
                        <button class="menu-item" data-speed="0.25">0.25x</button>
                        <button class="menu-item" data-speed="0.5">0.5x</button>
                        <button class="menu-item" data-speed="0.75">0.75x</button>
                        <button class="menu-item" data-speed="1.0">Normal</button>
                        <button class="menu-item" data-speed="1.25">1.25x</button>
                        <button class="menu-item" data-speed="1.5">1.5x</button>
                        <button class="menu-item" data-speed="1.75">1.75x</button>
                        <button class="menu-item" data-speed="2.0">2x</button>
                        <button class="menu-item" data-speed="3.0">3x</button>
                        <button class="menu-item" data-speed="4.0">4x</button>
                    </div>
                </div>
                
                <div class="vlc-menu" id="aspectRatioMenu">
                    <div class="menu-header">
                        <span>Aspect Ratio</span>
                        <button class="vlc-button" onclick="toggleMenu('aspectRatioMenu')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="menu-content" id="aspectRatioOptions">
                        <button class="menu-item" data-ratio="default">Default</button>
                        <button class="menu-item" data-ratio="16:9">16:9</button>
                        <button class="menu-item" data-ratio="4:3">4:3</button>
                        <button class="menu-item" data-ratio="1:1">1:1</button>
                        <button class="menu-item" data-ratio="16:10">16:10</button>
                        <button class="menu-item" data-ratio="2.21:1">2.21:1</button>
                        <button class="menu-item" data-ratio="2.35:1">2.35:1</button>
                        <button class="menu-item" data-ratio="2.39:1">2.39:1</button>
                        <button class="menu-item" data-ratio="5:4">5:4</button>
                    </div>
                </div>

                <div class="vlc-menu" id="deinterlaceMenu">
                    <div class="menu-header">
                        <span>Deinterlace Mode</span>
                        <button class="vlc-button" onclick="toggleMenu('deinterlaceMenu')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div class="menu-content" id="deinterlaceOptions">
                        <button class="menu-item" data-deinterlace="off">Off</button>
                        <button class="menu-item" data-deinterlace="blend">Blend</button>
                        <button class="menu-item" data-deinterlace="bob">Bob</button>
                        <button class="menu-item" data-deinterlace="linear">Linear</button>
                        <button class="menu-item" data-deinterlace="yadif">Yadif</button>
                        <button class="menu-item" data-deinterlace="yadif2x">Yadif 2x</button>
                        <button class="menu-item" data-deinterlace="phosphor">Phosphor</button>
                        <button class="menu-item" data-deinterlace="ivtc">IVTC</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Image/PDF Viewer Modal -->
    <div class="preview-modal" id="previewModal">
        <div class="preview-container">
            <button class="close-btn" onclick="closePreview()">×</button>
            <div id="previewContent"></div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/vlc-player.js') }}"></script>
    <script src="{{ url_for('static', filename='js/file-explorer.js') }}"></script>
</body>
</html>