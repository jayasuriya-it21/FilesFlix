{% extends "base.html" %}

{% block title %}FileFlix - Host Settings{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="/static/css/host_style.css">
    <link rel="stylesheet" href="/static/css/explorer.css">
    <link rel="stylesheet" href="/static/css/player.css">
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/components.css">
{% endblock %}

{% block content %}
    <div class="container">
        <div class="card">
            <div class="card-header">
                <h2 class="modal-title">Host Configuration</h2>
                <p class="text-muted">Configure your FileFlix media server</p>
            </div>
            <div class="card-body">                <div class="form-group">
                    <h3 class="form-label">Media Directory</h3>
                    <p class="form-help">Select the directory containing your media files:</p>
                    <div class="flex items-center gap-sm">
                        <input type="text" id="media-path-input" class="form-control" placeholder="Enter media directory path" value="{{ current_dir | default('') }}" aria-label="Media directory path">
                        <button id="select-dir-btn" class="btn btn-primary" aria-label="Browse Directory">
                            <i class="fas fa-folder-open"></i>
                            Browse
                        </button>
                    </div>
                    <!-- Hidden file input for directory selection -->
                    <input type="file" id="directory-picker" webkitdirectory directory multiple style="display: none;" aria-label="Directory Picker">
                </div>
                <div class="flex justify-end gap-md mt-4">
                    <button id="set-dir-btn" class="btn btn-primary" disabled aria-label="Set Directory">
                        <i class="fas fa-check"></i>
                        Set Directory
                    </button>
                    <button id="scan-media-btn" class="btn btn-secondary" aria-label="Scan for Media">
                        <i class="fas fa-sync"></i>
                        Scan for Media
                    </button>
                </div>
            </div>
        </div>

        <div class="card mt-4">
            <div class="card-header">
                <h3 class="form-label">System Status</h3>
            </div>
            <div class="card-body">
                <div class="status-grid">
                    <div class="status-item">
                        <span class="status-label">Server Status:</span>
                        <span id="server-status" class="badge badge-success">Online</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">FFmpeg:</span>
                        <span id="ffmpeg-status" class="badge badge-warning">Checking...</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">CPU Usage:</span>
                        <span id="cpu-usage" class="badge badge-secondary">--</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Memory Usage:</span>
                        <span id="memory-usage" class="badge badge-secondary">--</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Current Directory:</span>
                        <span id="current-dir" class="badge badge-secondary">{{ current_dir | default('Not set') }}</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mt-4">
            <div class="card-header">
                <h3 class="form-label">Network Information</h3>
            </div>
            <div class="card-body">
                <div class="status-grid">
                    <div class="status-item">
                        <span class="status-label">Server URL:</span>
                        <span id="server-url" class="badge badge-secondary">http://localhost:5000</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Local IP:</span>
                        <span id="local-ip" class="badge badge-warning">Detecting...</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="flex justify-end gap-md mt-4">
            <a href="/" class="btn btn-secondary" aria-label="Back to Browser">
                <i class="fas fa-arrow-left"></i>
                Back to Browser
            </a>
            <button id="refresh-status-btn" class="btn btn-primary" aria-label="Refresh Status">
                <i class="fas fa-sync"></i>
                Refresh Status
            </button>
        </div>
    </div>
{% endblock %}

{% block extra_js %}
    <script src="/static/js/host.js"></script>
{% endblock %}